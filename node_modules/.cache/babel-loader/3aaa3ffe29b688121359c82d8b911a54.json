{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\fic\\\\Desktop\\\\React Heitor\\\\TWNewTime\\\\twr\\\\src\\\\pages\\\\Login.js\";\nimport React, { Component } from 'react';\nimport Axios from 'axios';\nimport { parseJwt } from '../services/auth';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      senha: '',\n      erroMensagem: '',\n      isLoading: false\n    };\n  }\n\n  efetuaLogin(event) {\n    event.preventDefault();\n    this.setState({\n      erroMensagem: ''\n    });\n    this.setState({\n      isLoading: true\n    });\n    Axios.post('https://localhost:5001/api/login', {\n      email: this.state.email,\n      senha: this.state.senha\n    }).then(data => {\n      if (data.status === 200) {\n        localStorage.setItem('autenticar', data.data.token);\n        this.setState({\n          isLoading: false\n        });\n        var base64 = localStorage.getItem('autenticar').split('.')[1];\n        console.log(parseJwt().Role); // window.location.href =\"/\"\n\n        if (parseJwt().Role === 'Administrador') {\n          this.props.history.push('./DashUsuario');\n        } else {\n          this.props.history.push('/');\n        }\n      }\n    }).catch(erro => {\n      this.setState({\n        erroMensagem: 'E-mail ou senha inválidos!'\n      });\n      this.setState({\n        isLoading: false\n      });\n    });\n  }\n\n  atualizaStateCampo(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n    this.setState();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"body\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.efetuaLogin.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      placeholder: \"username\",\n      value: this.state.email,\n      onChange: this.atualizaStateCampo.bind(this),\n      className: \"input__login\",\n      type: \"text\",\n      name: \"email\",\n      id: \"login__email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      placeholder: \"password\",\n      value: this.state.senha,\n      onChange: this.atualizaStateCampo.bind(this),\n      className: \"input__login\",\n      type: \"password\",\n      name: \"senha\",\n      id: \"login__password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        color: 'red'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, this.state.erroMensagem), this.state.isLoading === false && React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn__login\",\n      id: \"btn__login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Login\"), this.state.isLoading === true && React.createElement(\"button\", {\n      type: \"submit\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Carregando...\"))))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/fic/Desktop/React Heitor/TWNewTime/twr/src/pages/Login.js"],"names":["React","Component","Axios","parseJwt","Login","constructor","props","state","email","senha","erroMensagem","isLoading","efetuaLogin","event","preventDefault","setState","post","then","data","status","localStorage","setItem","token","base64","getItem","split","console","log","Role","history","push","catch","erro","atualizaStateCampo","target","name","value","render","bind","color"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport Axios from 'axios';\r\nimport { parseJwt } from '../services/auth';\r\n\r\nclass Login extends Component{\r\n\r\n    constructor(props){\r\n      super(props);\r\n      this.state = {\r\n        email : '',\r\n        senha : '',\r\n        erroMensagem : '',\r\n        isLoading : false\r\n      }\r\n    }\r\n\r\n    efetuaLogin(event){\r\n\r\n      \r\n      event.preventDefault();\r\n      this.setState({erroMensagem : ''})\r\n      this.setState({isLoading : true });\r\n\r\n      Axios.post('https://localhost:5001/api/login', \r\n            \r\n      {  email : this.state.email, senha : this.state.senha                                        \r\n      }).then(data => {\r\n      \r\n        if (data.status === 200){\r\n        localStorage.setItem('autenticar', data.data.token)\r\n        this.setState({isLoading : false});\r\n\r\n        var base64 = localStorage.getItem('autenticar').split('.')[1];\r\n\r\n        console.log(parseJwt().Role)\r\n        // window.location.href =\"/\"\r\n        if (parseJwt().Role === 'Administrador') {\r\n          this.props.history.push('./DashUsuario')\r\n        }else{\r\n          this.props.history.push('/')\r\n        }\r\n\r\n      }})\r\n    .catch(erro => {\r\n      this.setState({erroMensagem : 'E-mail ou senha inválidos!'})\r\n      this.setState({isLoading : false});\r\n    });\r\n  \r\n  }\r\n\r\n  atualizaStateCampo(event){\r\n    this.setState({ [event.target.name] : event.target.value })\r\n    this.setState()\r\n  }\r\n\r\n  \r\n\r\n    render(){\r\n      return(\r\n        <div>\r\n\r\n<body>\r\n    <section>\r\n          <form onSubmit={this.efetuaLogin.bind(this)}>\r\n            <div className=\"item\">\r\n              <input\r\n                placeholder=\"username\"\r\n                value={this.state.email}\r\n                onChange={this.atualizaStateCampo.bind(this)}\r\n                className=\"input__login\"\r\n                type=\"text\"\r\n                name=\"email\"\r\n                id=\"login__email\"\r\n              />\r\n            </div>\r\n            <div className=\"item\">\r\n              <input\r\n                placeholder=\"password\"\r\n                value={this.state.senha}\r\n                onChange={this.atualizaStateCampo.bind(this)}\r\n                className=\"input__login\"\r\n                type=\"password\"\r\n                name=\"senha\"\r\n                id=\"login__password\"/>\r\n            </div>\r\n            <div className=\"item\">\r\n            \r\n            <p style={{ color : 'red' }}>{this.state.erroMensagem}</p>\r\n\r\n          {\r\n              this.state.isLoading === false &&\r\n              <button type=\"submit\" className=\"btn btn__login\" id=\"btn__login\">Login</button>\r\n          }\r\n\r\n          {\r\n          this.state.isLoading === true &&\r\n          <button type=\"submit\" disabled>Carregando...</button>\r\n          }\r\n\r\n\r\n            </div>                \r\n          </form>\r\n\r\n    </section>\r\n\r\n \r\n  </body>\r\n\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}